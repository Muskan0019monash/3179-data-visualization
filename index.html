<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Global Migration to Australia</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      margin: 20px;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    #worldMap, #ausChart {
      margin: 20px auto;
      max-width: 11000px;
      background: rgb(159, 36, 36);
      border: 1px solid #ccc;
      padding: 15px;
      border-radius: 10px;
    }
  </style>
</head>

<body style="font-family: Arial, sans-serif; margin: 20px;">

  <h1>Global Migration Flows into Australia</h1>
  <p>
    This project visualises where migrants are coming from globally,
    and then zooms into Australia‚Äôs immigration breakdown.
  </p>

  <!-- World Map -->
  <h2>üåç World Migration to Australia</h2>
  <div id="worldMap"></div>

  <!-- Australia Chart -->
  <h2>üá¶üá∫ Australia‚Äôs Top Source Countries</h2>
  <div id="ausChart"></div>

  <script type="text/javascript">
    // World Map (Bubble Overlay)
    const worldMapSpec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 800,
      "height": 450,
      "projection": {"type": "equirectangular"},
      "layer": [
        {
          "data": {
            "url": "https://raw.githubusercontent.com/vega/vega/main/docs/data/world-110m.json",
            "format": {"type": "topojson", "feature": "countries"}
          },
          "mark": {"type": "geoshape", "fill": "#eee", "stroke": "lightgray"}
        },
        {
          "data": {"url": "data/world_migration.csv"},
          "mark": {"type": "circle", "opacity": 0.7, "stroke": "black", "strokeWidth": 0.5},
          "encoding": {
            "longitude": {"field": "lon", "type": "quantitative"},
            "latitude": {"field": "lat", "type": "quantitative"},
            "size": {"field": "migrants", "type": "quantitative", "scale": {"range": [0, 2000]}},
            "color": {"value": "steelblue"},
            "tooltip": [
              {"field": "origin_country", "type": "nominal", "title": "Origin"},
              {"field": "migrants", "type": "quantitative", "title": "Migrants"}
            ]
          }
        }
      ]
    };

    // Australia Bar Chart
    const ausChartSpec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 600,
      "height": 400,
      "data": {"url": "data/aus_migration.csv"},
      "mark": "bar",
      "encoding": {
        "x": {"field": "origin_country", "type": "nominal", "sort": "-y", "title": "Origin Country"},
        "y": {"field": "migrants", "type": "quantitative", "title": "Number of Migrants"},
        "tooltip": [
          {"field": "origin_country", "type": "nominal"},
          {"field": "migrants", "type": "quantitative"}
        ],
        "color": {"value": "darkorange"}
      }
    };

    // Embed into page
    vegaEmbed('#worldMap', worldMapSpec);
    vegaEmbed('#ausChart', ausChartSpec);
  </script>

</body>
</html>
